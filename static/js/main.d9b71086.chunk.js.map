{"version":3,"sources":["components/KakaoMap/MapLoader.tsx","components/KakaoMap/index.tsx","components/HorizontalContainer.tsx","components/Dot.tsx","components/Aside.tsx","providers/StatusProvider.tsx","components/IconButton.tsx","pages/Map/Controls/ViewerButtons.tsx","helpers/colors.ts","pages/Map/Viewer.tsx","helpers/stringFormat.ts","components/Point.tsx","pages/Map/Controls/EditorButtons.tsx","helpers/unionSet.ts","pages/Map/Editor.tsx","helpers/fileInteracts.ts","providers/ControlProvider.tsx","pages/Map/index.tsx","pages/App.tsx","reportWebVitals.ts","index.tsx"],"names":["Dimmer","styled","div","_templateObject","_taggedTemplateLiteral","MapLoader","props","_useInjectKakaoMapApi","useInjectKakaoMapApi","appkey","process","libraries","retries","loading","error","React","createElement","Fragment","Map","ContainerStyled","_ref","position","css","_templateObject2","_templateObject3","ContentStyled","_templateObject4","_ref2","gap","concat","Divider","MUIDivider","orientation","HorizontalContainer","_ref3","_ref3$gap","_ref3$style","style","children","paddleAnimation","keyframes","Circle","color","size","animate","Container","Dot","_ref3$color","_ref3$size","className","ContainerWrapper","fold","FoldButtonContainerStyled","FoldButtonStyled","_templateObject5","ref","_useState","useState","_useState2","_slicedToArray","setFold","ArrowIcon","useCallback","sx","width","fontSize","KeyboardDoubleArrowRightIcon","KeyboardDoubleArrowLeftIcon","onClick","evt","prev","Aside","forwardRef","initialState","currentTime","logs","Context","createContext","undefined","StatusProvider","state","setState","Provider","value","_objectSpread","IconButton","_ref$tooltip","tooltip","_ref$tooltipColor","tooltipColor","_ref$tooltipPlacement","tooltipPlacement","_ref$tooltipSize","tooltipSize","active","_ref$disabled","disabled","_ref$loading","_ref$variant","variant","MuiTooltip","arrow","title","placement","MuiIconButton","--IconButton-size","CircularProgress","MenuButton","_ref$active","icon","PlaySpeedButton","speed","onSelectSpeed","_React$useState","_React$useState2","anchorEl","setAnchorEl","isOpen","Boolean","close","Item","item","MenuItem","Object","assign","selected","select","toFixed","event","currentTarget","SlowMotionVideoIcon","Menu","open","onClose","SliderWrapperStyled","ViewerButtons","running","runable","progressMax","progressCurrent","onProgressUpdated","onClickPlay","onClickUpload","PlayControlButton","PauseIcon","PlayArrowIcon","UploadButton","useRef","htmlFor","display","id","name","type","accept","onChange","UploadIcon","current","click","Slider","aria-label","defaultValue","min","max","step","valueLabelDisplay","console","log","marginLeft","randomDarkColor","arrayToHex","shuffleArray","Math","random","map","round","rgb","c","toString","padStart","join","array","a","_toConsumableArray","i","length","j","floor","temp","MarkerType","LogIcon","isHover","setHover","backgroundColor","justifyItems","alignItems","height","borderRadius","onMouseOver","onMouseLeave","VehicleLogInfoStyled","RoadLineStyled","VehicleIconTooltipStyled","Icon","iconStyle","fill","marginTop","LocalTaxiIcon","HailIcon","KeyboardDoubleArrowDownIcon","LogInfoStyled","get_slope_weight","x1","y1","x2","y2","cx","cy","lx","abs","ly","dx","dy","r","sqrt","Viewer","_useState3","_useState4","markerPositions","setMarkerPositions","_useStatusState","ctx","useContext","Error","useStatusState","_useStatusState2","status","setStatus","_useState5","_useState6","level","setLevel","_useState7","_useState8","setRunable","_useState9","_useState10","setRunning","_useState11","_useState12","setSpeed","_useState13","_useState14","setProgressMax","_useState15","_useState16","setProgressCurrent","_useState17","_useState18","allColors","setColors","_useState19","_useState20","setLogs","_useState21","_useState22","vehiclesState","setVehiclesState","useEffect","useMap","getLevel","displayTimeAt","t","_logs$t","vehicles","time","tasks","vMarkers","Array","from","_ref5","lat","lng","key","tMarkers","_ref6","pick_lat","pick_lng","drop_lat","drop_lng","flat","filter","newState","_i","_Array$from","vehicle","set","nameCollected","Set","_ref8","v","reduce","curr","newMap","_i2","_nameCollected","allocated_id","interval","DEFAULT_TIMESTEP","timer","setTimeout","clearTimeout","fitMapBound","nodes","bounds","kakao","maps","LatLngBounds","forEach","_ref9","extend","LatLng","setBounds","positions","_ref10","_vehicles$map","_ref11","apply","_ref12","nameKeyValueMap","_ref13","_ref14","_ref15","_defineProperty","previousValue","currentValue","focusTo","_ref17","panTo","LogItemVehicleWithTask","_ref18","colors","vehicle_id","vehicleTooltip","IconEmptyStyle","borderWidth","borderColor","borderStyle","justifySelf","borderTop","background","top","left","transition","zIndex","margin","_ref19","isPicked","isDroped","IconReadyStyle","IconNotReadyStyle","IconReadyInnerStyle","cursor","LogInfo","_ref20","values","thisVehicle","thisTasks","_ref21","_useState23","_useState24","subLogs","setSubLogs","sliced","slice","StateViewer","Typography","translate","textAlign","latestLog","Stack","spacing","marginBottom","date","options","timeZone","dateString","Intl","DateTimeFormat","dateStyle","format","dayPeriod","_timeFormat$split$1$s","hour","minute","second","hour12","split","_timeFormat$split$1$s2","humanizeDate","Date","_ref22","CustomOverlayMap","cc","parentElement","files","target","file","reader","FileReader","addEventListener","result","JSON","parse","_unused","window","alert","readAsText","_ref$color","Point","_ref4","_ref4$size","_ref4$selected","onMouseEnter","onMouseDown","onMouseUp","data-id","EditorButtons","editMode","onModeChanged","onClickDownload","onSelectMode","mode","ModeButtons","GrainIcon","PolylineIcon","OpenWithIcon","DownloadButton","DownloadIcon","UnionSet","_classCallCheck","this","parentIdx","_createClass","parent","get","president","find","b","ga","gb","keys","saveGraphFile","edges","json","keyToIndex","indexOf","transformed","info","to","filename","blob","document","download","href","URL","createObjectURL","dataset","downloadurl","e","revokeObjectURL","saveFile","toISOString","Blob","stringify","Editor","setNodes","bufNodes","_setBufNodes","setEdges","setEditMode","setSelected","cursorPos","setCursorPos","_visibleEdges","_setVisibleEdges","graphColors","setGraphColors","visibleEdges","useMemo","edge","_edges","_step","_iterator","_createForOfIteratorHelper","s","n","done","err","f","_step2","union","_iterator2","merge","_step3","colorMap","groupColors","_iterator3","_step4","_iterator4","getMapBounds","getBounds","_ref7","getNorthEast","getSouthWest","ne","sw","getLat","getLng","bottom","right","setTmpNodes","newNodes","_getMapBounds","nodesInGrid","grid","compressNodesInGrid","isSelected","selectedNode","node","findNode","_step5","_iterator5","getNode","isNodeVisible","relayout","hasNode","_selected","fromID","toID","createEdge","onMapClick","loc","latLng","nodeId","onMapMouseUp","onMapMouseMove","updateNodes","addListener","setCursor","removeListener","onMouseDownPoint","container","closest","getAttribute","mouseType","button","onMouseUpPoint","guideLine","Polyline","path","strokeWeight","strokeColor","strokeOpacity","strokeStyle","NodePoints","_ref16","EdgeLines","loadGraphFromFile","_JSON$parse","downloadGraphToFile","viewSpeed","viewRunning","ControlProvider","useControlState","SwitchButton","Button","startDecorator","borderTopRightRadius","borderBottomRightRadius","CableIcon","borderTopLeftRadius","borderBottomLeftRadius","_useControlState","_useControlState2","controls","setControls","SwitchButtonControlled","padding","KakaoMap","center","onZoomChanged","App","reportWebVitals","onPerfEntry","Function","__webpack_require__","then","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render"],"mappings":"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","file":"static/js/main.d9b71086.chunk.js","sourcesContent":["import React, { useEffect } from \"react\"\n\nimport KakaoMapSDK, {\n  Map,\n  useInjectKakaoMapApi,\n  useMap,\n} from \"react-kakao-maps-sdk\"\nimport styled from \"styled-components\"\n\ntype MapProps = KakaoMapSDK.MapProps & {\n  style?: React.CSSProperties\n}\n\nconst Dimmer = styled.div`\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: rgb(0, 0, 0, 0.5);\n  backdrop-filter: blur(5px);\n`\n\nexport default function MapLoader(props: MapProps): React.ReactElement {\n  const { loading, error } = useInjectKakaoMapApi({\n    appkey: process.env.REACT_APP_KAKAO_MAP_API_KEY as string,\n    libraries: [\"services\", \"clusterer\"],\n    retries: 3,\n  })\n  return (\n    <>\n      {loading || error ? (\n        <Dimmer />\n      ) : (\n        <Map {...(props as KakaoMapSDK.MapProps)} />\n      )}\n    </>\n  )\n}\n","import MapLoader from \"./MapLoader\"\n\nexport default MapLoader\n","import React from \"react\"\nimport MUIDivider from \"@mui/joy/Divider\"\nimport styled, { css } from \"styled-components\"\n\nconst ContainerStyled = styled.div<{ position: \"top\" | \"bottom\" }>`\n  position: absolute;\n  display: flex;\n  left: calc(0px + 50%);\n  translate: -50% 0%;\n  margin: 0 auto;\n  width: fit-content;\n  height: 42px;\n  place-items: center;\n  padding: 6px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 1em;\n  box-sizing: border-box;\n\n  ${({ position }: any) =>\n    position == \"top\"\n      ? css`\n          top: 1rem;\n        `\n      : css`\n          bottom: 1rem;\n        `}\n`\n\nconst ContentStyled = styled.div<{ gap: number }>`\n  display: flex;\n  flex-direction: row;\n  gap: ${({ gap }: any) => `${gap}rem`};\n  margin: 0px auto;\n  place-items: center;\n  box-sizing: border-box;\n`\n\ntype ContainerProps = React.PropsWithChildren & {\n  position: \"top\" | \"bottom\"\n  gap?: number\n  style?: React.CSSProperties\n}\n\nconst HorizontalContainer = ({\n  position,\n  gap = 0.5,\n  style = {},\n  children,\n}: ContainerProps): React.ReactElement => (\n  <ContainerStyled position={position} style={style}>\n    <ContentStyled gap={gap}>{children}</ContentStyled>\n  </ContainerStyled>\n)\n\nexport const Divider = (): React.ReactElement => (\n  <MUIDivider orientation=\"vertical\" />\n)\n\nexport default HorizontalContainer\n","import React from \"react\"\nimport styled, { css, keyframes } from \"styled-components\"\n\nconst paddleAnimation = keyframes`\n  from {\n    transform: scale(1.0);\n    opacity: 1.0;\n  }\n  to {\n    transform: scale(2.0);\n    opacity: 0.0;\n  }\n`\n\ntype CircleStyleProps = {\n  size: number\n  color: string\n  animate?: boolean\n  children?: React.ReactNode | React.ReactNode[]\n}\n\nconst Circle = styled.div`\n  position: absolute;\n  display: flex;\n  width: 1em;\n  height: 1em;\n  background: ${({ color }: CircleStyleProps) => color};\n  border-radius: 8rem;\n  align-items: center;\n  justify-content: center;\n  scale: ${({ size }: CircleStyleProps) => size};\n\n  ${(props: CircleStyleProps) =>\n    props.animate &&\n    css`\n      animation: ${paddleAnimation} 1s ease-in-out infinite;\n    `};\n\n  > .icon {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n`\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n`\n\ntype DotProps = {\n  color?: string\n  size?: number\n  children?: React.ReactNode | React.ReactNode[]\n}\n\nconst Dot = ({ color = \"dodgerblue\", size = 2, children }: DotProps) => {\n  return (\n    <Container>\n      <Circle color={color} size={size} animate={true} />\n      <Circle color={color} size={size}>\n        <div className=\"icon\">{children}</div>\n      </Circle>\n    </Container>\n  )\n}\n\nexport default Dot\n","import React, { useState, useCallback, PropsWithChildren } from \"react\"\n\nimport styled, { css, keyframes } from \"styled-components\"\n\nimport KeyboardDoubleArrowLeftIcon from \"@mui/icons-material/KeyboardDoubleArrowLeft\"\nimport KeyboardDoubleArrowRightIcon from \"@mui/icons-material/KeyboardDoubleArrowRight\"\n\nconst ContainerWrapper = styled.div<{ fold: boolean }>`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  max-width: 280px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-items: center;\n  transition: transform 400ms cubic-bezier(0.65, 0.05, 0.36, 1);\n  z-index: 99999;\n\n  ${({ fold }: any) =>\n    fold &&\n    css`\n      transform: translateX(-100%);\n    `}\n`\n\nconst ContainerStyled = styled.div`\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  border: 0;\n  border-radius: 0;\n  outline: 0;\n  margin: 0;\n  padding: 1em 2em;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em rgba(128, 128, 128, 0.5);\n  overflow-y: auto;\n`\n\nconst FoldButtonContainerStyled = styled.div`\n  position: absolute;\n  display: flex;\n  width: 1.25em;\n  height: 100%;\n  right: -1.25em;\n  justify-content: center;\n  align-items: center;\n`\n\nconst FoldButtonStyled = styled.div`\n  width: 100%;\n  height: 3em;\n  display: flex;\n  padding: 0 2px;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  background-color: #ffffff;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  clip-path: inset(-1em -1em -1em 0px);\n  box-shadow: 0 0 1em rgba(128, 128, 128, 0.5);\n  cursor: pointer;\n`\n\ntype ContainerProps = {\n  _ref: React.ForwardedRef<any>\n  children?: React.ReactNode\n}\n\nconst Container = ({\n  _ref: ref,\n  children,\n}: ContainerProps): React.ReactElement => {\n  const [fold, setFold] = useState<boolean>(true)\n  const ArrowIcon = useCallback(() => {\n    const props = {\n      sx: {\n        width: \"100%\",\n        fontSize: \"1rem\",\n      },\n    }\n    return fold ? (\n      <KeyboardDoubleArrowRightIcon {...props} />\n    ) : (\n      <KeyboardDoubleArrowLeftIcon {...props} />\n    )\n  }, [fold])\n  return (\n    <ContainerWrapper fold={fold}>\n      <ContainerStyled ref={ref}>\n        <>{children}</>\n      </ContainerStyled>\n      <FoldButtonContainerStyled>\n        <FoldButtonStyled\n          onClick={(evt) => {\n            setFold((prev) => !prev)\n          }}\n        >\n          <ArrowIcon />\n        </FoldButtonStyled>\n      </FoldButtonContainerStyled>\n    </ContainerWrapper>\n  )\n}\n\nconst Aside = React.forwardRef((props: PropsWithChildren, ref) => (\n  <Container _ref={ref}>\n    <>{props.children}</>\n  </Container>\n))\n\nexport default Aside\n","import React, { createContext, useState, useContext } from \"react\"\n\nexport interface ContextState<T> {\n  state: T\n  setState: React.Dispatch<React.SetStateAction<T>>\n}\n\nexport interface StatusState {\n  currentTime: number | null\n  logs: Array<any>\n}\n\nconst initialState: StatusState = {\n  currentTime: null,\n  logs: [],\n}\n\nconst Context: any = createContext<ContextState<StatusState> | undefined>(\n  undefined\n)\n\nexport const StatusProvider = (props: any) => {\n  const [state, setState] = useState<StatusState>(initialState)\n\n  return (\n    <Context.Provider value={{ state: { ...state }, setState }}>\n      <>{props.children}</>\n    </Context.Provider>\n  )\n}\n\nexport const useStatusState = (): [\n  StatusState,\n  React.Dispatch<React.SetStateAction<StatusState>>\n] => {\n  const ctx: ContextState<StatusState> | undefined = useContext(Context)\n  if (ctx === undefined) {\n    throw new Error(\"useStatusState should be used within StatusProvider\")\n  }\n  const { state, setState } = ctx\n  return [\n    state as StatusState,\n    setState as React.Dispatch<React.SetStateAction<StatusState>>,\n  ]\n}\n","import React, { useCallback } from \"react\"\n\nimport MuiIconButton from \"@mui/joy/IconButton\"\nimport MuiTooltip from \"@mui/joy/Tooltip\"\nimport CircularProgress from \"@mui/joy/CircularProgress\"\n\ntype IconButtonProps = React.PropsWithChildren & {\n  tooltip?: React.ReactNode\n  tooltipColor:\n    | \"primary\"\n    | \"neutral\"\n    | \"danger\"\n    | \"info\"\n    | \"success\"\n    | \"warning\"\n  tooltipPlacement?:\n    | \"bottom\"\n    | \"left\"\n    | \"right\"\n    | \"top\"\n    | \"bottom-end\"\n    | \"bottom-start\"\n    | \"left-end\"\n    | \"left-start\"\n    | \"right-end\"\n    | \"right-start\"\n    | \"top-end\"\n    | \"top-start\"\n  tooltipSize?: \"sm\" | \"md\" | \"lg\"\n  active: boolean\n  disabled?: boolean\n  loading?: boolean\n  variant?: \"plain\" | \"outlined\" | \"soft\" | \"solid\"\n  size: string\n  onClick: (event: React.MouseEvent<HTMLElement>) => void\n}\n\nconst IconButton = ({\n  tooltip = undefined,\n  tooltipColor = \"primary\",\n  tooltipPlacement = \"bottom\",\n  tooltipSize = \"sm\",\n  active,\n  disabled = false,\n  loading = false,\n  variant = \"plain\",\n  size,\n  onClick,\n  children,\n}: IconButtonProps) => {\n  return (\n    <MuiTooltip\n      arrow\n      title={tooltip}\n      color={tooltipColor}\n      placement={tooltipPlacement}\n      size={tooltipSize}\n      variant={variant}\n    >\n      <MuiIconButton\n        variant={active ? \"solid\" : \"soft\"}\n        sx={{\n          \"--IconButton-size\": size,\n        }}\n        disabled={disabled}\n        onClick={onClick}\n      >\n        {loading ? (\n          <CircularProgress\n            color=\"primary\"\n            size=\"sm\"\n            value={33}\n            variant=\"plain\"\n          />\n        ) : (\n          children\n        )}\n      </MuiIconButton>\n    </MuiTooltip>\n  )\n}\n\nexport default IconButton\n","import React, { useState, useCallback, useRef } from \"react\"\n\nimport { Slider, Menu, MenuItem } from \"@mui/joy\"\nimport UploadIcon from \"@mui/icons-material/Upload\"\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\"\nimport PauseIcon from \"@mui/icons-material/Pause\"\n\nimport IconButton from \"../../../components/IconButton\"\nimport SlowMotionVideoIcon from \"@mui/icons-material/SlowMotionVideo\"\nimport HorizontalContainer, {\n  Divider,\n} from \"../../../components/HorizontalContainer\"\nimport styled from \"styled-components\"\n\ntype MenuButtonProps = {\n  title?: string\n  active?: boolean\n  disabled?: boolean\n  loading?: boolean\n  icon: React.ReactElement\n  onClick: (event: React.MouseEvent<HTMLElement>) => void\n}\n\nconst MenuButton = ({\n  title,\n  active = false,\n  disabled = false,\n  loading = false,\n  icon,\n  onClick,\n}: MenuButtonProps) => {\n  return (\n    <IconButton\n      tooltip={title}\n      tooltipColor=\"primary\"\n      tooltipPlacement=\"top\"\n      active={active}\n      disabled={disabled}\n      loading={loading}\n      variant=\"outlined\"\n      size={\"32px\"}\n      onClick={onClick}\n    >\n      {icon}\n    </IconButton>\n  )\n}\n\ntype SpeedControlProps = {\n  speed: number\n  onSelectSpeed: (speed: number) => void\n}\n\nconst PlaySpeedButton = ({\n  speed,\n  onSelectSpeed,\n}: SpeedControlProps): React.ReactElement => {\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const isOpen = Boolean(anchorEl)\n  const handleClick = (event: React.SyntheticEvent<any>) => {\n    setAnchorEl(event.currentTarget)\n  }\n  const close = () => {\n    setAnchorEl(null)\n  }\n  const select = (item: number) => {\n    onSelectSpeed(item)\n    close()\n  }\n\n  const Item = useCallback(\n    (item: number): React.ReactElement => (\n      <MenuItem\n        {...(speed === item && { selected: true, variant: \"soft\" })}\n        onClick={() => select(item)}\n      >\n        x{item.toFixed(1)}\n      </MenuItem>\n    ),\n    [speed]\n  )\n\n  return (\n    <div>\n      <MenuButton\n        title={isOpen ? undefined : \" \"}\n        onClick={handleClick}\n        icon={<SlowMotionVideoIcon />}\n      />\n      <Menu\n        anchorEl={anchorEl}\n        open={isOpen}\n        onClose={close}\n        color=\"primary\"\n        size=\"sm\"\n        variant=\"plain\"\n      >\n        {Item(1.0)}\n        {Item(2.0)}\n        {Item(5.0)}\n        {Item(10.0)}\n      </Menu>\n    </div>\n  )\n}\n\nconst SliderWrapperStyled = styled.div`\n  width: calc(100vw - 600px);\n  width: calc(100svw - 600px);\n  max-width: 480px;\n  padding-left: 0.5rem;\n  padding-right: 1rem;\n  box-sizing: border-box;\n`\n\ntype ViewerButtonsProps = {\n  running: boolean\n  runable: boolean\n  progressMax: number\n  progressCurrent: number\n  onProgressUpdated: (progress: number) => void\n  onClickPlay: () => void\n  onClickUpload: (event: React.ChangeEvent<HTMLInputElement>) => void\n} & SpeedControlProps\n\nconst ViewerButtons = ({\n  running,\n  runable,\n  progressMax,\n  progressCurrent,\n  speed,\n  onSelectSpeed,\n  onProgressUpdated,\n  onClickPlay,\n  onClickUpload,\n}: ViewerButtonsProps): React.ReactElement => {\n  const PlayControlButton = useCallback((): React.ReactElement => {\n    return running ? (\n      <MenuButton title=\"\" onClick={onClickPlay} icon={<PauseIcon />} />\n    ) : (\n      <MenuButton\n        title=\"\"\n        disabled={!runable}\n        onClick={onClickPlay}\n        icon={<PlayArrowIcon />}\n      />\n    )\n  }, [running, runable])\n\n  const UploadButton = useCallback((): React.ReactElement => {\n    const ref = useRef<HTMLInputElement>(null)\n    return (\n      <>\n        <label\n          htmlFor=\"upload-log\"\n          style={{\n            width: \"32px\",\n          }}\n        >\n          <input\n            ref={ref}\n            style={{ display: \"none\" }}\n            id=\"upload-log\"\n            name=\"upload-log\"\n            type=\"file\"\n            accept=\".json,application/json\"\n            onChange={onClickUpload}\n          />\n          <MenuButton\n            title=\"\"\n            icon={<UploadIcon />}\n            onClick={() => {\n              if (ref.current) {\n                ref.current.click()\n              }\n            }}\n          />\n        </label>\n      </>\n    )\n  }, [onClickUpload])\n\n  return (\n    <>\n      <HorizontalContainer position=\"bottom\">\n        <UploadButton />\n        <PlayControlButton />\n        <PlaySpeedButton speed={speed} onSelectSpeed={onSelectSpeed} />\n        <Divider />\n        <SliderWrapperStyled>\n          <Slider\n            color=\"primary\"\n            aria-label=\"Timestamp\"\n            defaultValue={0}\n            value={progressCurrent}\n            min={0}\n            max={progressMax}\n            step={1}\n            disabled={!runable || running}\n            size=\"md\"\n            valueLabelDisplay=\"off\"\n            variant=\"solid\"\n            onChange={(\n              event: React.SyntheticEvent | Event,\n              value: number | number[]\n            ) => {\n              console.log(\"new value\", value)\n              if (typeof value === \"number\") {\n                onProgressUpdated(value)\n              } else {\n                onProgressUpdated(value[0])\n              }\n            }}\n            style={{\n              width: \"calc(100% - 0.5rem)\",\n              marginLeft: \"0.5rem\",\n            }}\n          />\n        </SliderWrapperStyled>\n      </HorizontalContainer>\n    </>\n  )\n}\n\nexport default ViewerButtons\n","export const randomColor = () => \"#\" + Math.random().toString(16).slice(-6)\n\nexport const randomLightColor = () => {\n  const rgb = shuffleArray([\n    Math.random() * 128 + 48,\n    Math.random() * 128 + 80,\n    Math.random() * 64 + 192\n  ].map(Math.round));\n  return arrayToHex(rgb)\n}\n\nexport const randomDarkColor = () => {\n  const rgb = shuffleArray([\n    Math.random() * 64,\n    Math.random() * 128,\n    Math.random() * 64 + 128\n  ].map(Math.round))\n  return arrayToHex(rgb)\n}\n\nfunction arrayToHex(rgb: number[]) {\n  return \"#\" + rgb.map((c: number) => c.toString(16).padStart(2, \"0\")).join(\"\")\n}\n\nfunction shuffleArray(array: any[]) {\n  const a = [...array]\n  for (var i = a.length - 1; i > 0; i--) {\n      var j = Math.floor(Math.random() * (i + 1));\n      var temp = a[i];\n      a[i] = a[j];\n      a[j] = temp;\n  }\n  return a\n}\n","/* global kakao */\n\nimport React, {\n  useEffect,\n  useState,\n  useCallback,\n  useRef,\n  CSSProperties,\n} from \"react\"\n\nimport Dot from \"../../components/Dot\"\nimport Aside from \"../../components/Aside\"\n\nimport LocalTaxiIcon from \"@mui/icons-material/LocalTaxi\"\nimport HailIcon from \"@mui/icons-material/Hail\"\nimport KeyboardDoubleArrowDownIcon from \"@mui/icons-material/KeyboardDoubleArrowDown\"\nimport { Divider, Stack, Typography } from \"@mui/joy\"\nimport MuiTooltip from \"@mui/joy/Tooltip\"\n\nimport { CustomOverlayMap, useMap } from \"react-kakao-maps-sdk\"\n\nimport { useStatusState, StatusState } from \"../../providers/StatusProvider\"\nimport ViewerButtons from \"./Controls/ViewerButtons\"\nimport { humanizeDate } from \"../../helpers/stringFormat\"\nimport { randomDarkColor } from \"../../helpers/colors\"\nimport styled from \"styled-components\"\n\nconst MarkerType = {\n  NONE: -1,\n  VEHICLE: 0,\n  PERSON_PICK: 1,\n  PERSON_DROP: 2,\n}\n\ntype MarkerPosition = {\n  key: string | null\n  color?: string\n  size: number\n  lat: number\n  lng: number\n  type: number\n}\n\ninterface ColorName {\n  [key: string]: string\n}\n\ntype VehicleState = {\n  name: string\n  lat: number\n  lng: number\n  allocated_id: number | null\n}\n\ntype TaskType = {\n  id: number\n  drop_lat: number\n  drop_lng: number\n  pick_lat: number\n  pick_lng: number\n  status: number\n  time: number\n}\n\nconst LogIcon = ({\n  color,\n  style,\n  children,\n  tooltip = null,\n  onClick,\n}: any): React.ReactElement => {\n  const [isHover, setHover] = useState<boolean>(false)\n  return (\n    <div\n      style={{\n        backgroundColor: color || \"black\",\n        display: \"flex\",\n        justifyItems: \"center\",\n        alignItems: \"center\",\n        width: \"32px\",\n        height: \"32px\",\n        borderRadius: \"6rem\",\n        ...style,\n      }}\n      onMouseOver={() => setHover(true)}\n      onMouseLeave={() => setHover(false)}\n      onClick={onClick || null}\n    >\n      <>{children}</>\n      <>{tooltip != null && isHover && tooltip}</>\n    </div>\n  )\n}\n\nconst VehicleLogInfoStyled = styled.div`\n  width: calc(100% - 12px);\n  position: relative;\n  box-sizing: border-box;\n  padding: 0 6px;\n  display: flex;\n  align-items: center;\n`\n\nconst RoadLineStyled = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 3px;\n  background-color: #efefef;\n  border-radius: 1em;\n  z-index: 0;\n`\n\nconst VehicleIconTooltipStyled = styled.div`\n  position: absolute;\n  bottom: calc(-32px / 2 - -8px);\n  font-size: 12px;\n  left: calc(32px / 2);\n  width: fit-content;\n  white-space: nowrap;\n  word-break: keep-all;\n  background: ${({ color }: any) => color};\n  color: white;\n  border-radius: 3px;\n  padding: 2px 6px;\n  box-sizing: border-box;\n  min-width: 32px;\n  transform: translateX(-50%);\n  text-align: center;\n  box-shadow: 0 0 3px rgba(128, 128, 128, 0.2);\n`\n\ntype DisplayIconProps = {\n  type: number\n  style?: CSSProperties\n}\n\nconst Icon = ({ type, style = {} }: DisplayIconProps): any => {\n  const iconStyle = {\n    fill: \"white\",\n    marginTop: \"-1px\",\n    width: \"75%\",\n    ...style,\n  }\n  if (type == MarkerType.NONE) {\n    return <></>\n  } else if (type == MarkerType.VEHICLE) {\n    return <LocalTaxiIcon style={iconStyle} />\n  } else if (type == MarkerType.PERSON_PICK) {\n    return <HailIcon style={iconStyle} />\n  } else if (type == MarkerType.PERSON_DROP) {\n    return <KeyboardDoubleArrowDownIcon style={iconStyle} />\n  }\n}\n\nconst LogInfoStyled = styled.div`\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 0.5rem 0;\n`\n\nconst get_slope_weight = (\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  cx: number,\n  cy: number\n) => {\n  const lx = Math.abs(x2 - x1)\n  const ly = Math.abs(y2 - y1)\n  const dx = cx - x1\n  const dy = cy - y1\n  const r = Math.sqrt(dx * dx + dy * dy) / Math.sqrt(lx * lx + ly * ly)\n  return Math.max(0.0, Math.min(r * 100.0, 100.0))\n}\n\nconst Viewer = (): React.ReactElement => {\n  const [markerPositions, setMarkerPositions] = useState<Array<MarkerPosition>>(\n    []\n  )\n  const [status, setStatus] = useStatusState()\n  const [level, setLevel] = useState<number>(3)\n  const [runable, setRunable] = useState<boolean>(false)\n  const [running, setRunning] = useState<boolean>(false)\n  const [speed, setSpeed] = useState<number>(1.0)\n  const [progressMax, setProgressMax] = useState<number>(0)\n  const [progressCurrent, setProgressCurrent] = useState<number>(0)\n  const [allColors, setColors] = useState<ColorName>({})\n  const [logs, setLogs] = useState<Array<any>>([])\n  const [vehiclesState, setVehiclesState] = useState<Map<string, VehicleState>>(\n    new Map()\n  )\n\n  useEffect(() => {\n    const { logs } = status as StatusState\n    setRunable(logs && logs.length > 0)\n    setLogs(logs)\n    setProgressCurrent(0)\n  }, [status])\n\n  const map = useMap()\n\n  useEffect(() => {\n    setLevel(map.getLevel())\n  }, [map])\n\n  useEffect(() => {\n    map.setLevel(level)\n  }, [map, level])\n\n  const displayTimeAt = useCallback(\n    (t: number) => {\n      if (!logs || t >= logs.length) return\n\n      const { time, vehicles, tasks } = logs[t]\n\n      const vMarkers: Array<MarkerPosition> = Array.from(vehicles || []).map(\n        ({ name, lat, lng }: any) => ({\n          key: name,\n          color: allColors[name],\n          size: 5,\n          lat,\n          lng,\n          type: MarkerType.VEHICLE,\n        })\n      )\n\n      const tMarkers: Array<MarkerPosition> = Array.from(tasks || [])\n        .map(\n          ({\n            id,\n            pick_lat,\n            pick_lng,\n            drop_lat,\n            drop_lng,\n            status,\n          }: any): any[] => [\n            0 <= status && status <= 5\n              ? {\n                  key: `task-${id}-pick`,\n                  color: allColors[id],\n                  size: 4,\n                  lat: pick_lat,\n                  lng: pick_lng,\n                  type: MarkerType.PERSON_PICK,\n                }\n              : null,\n            {\n              key: `task-${id}-drop`,\n              color: allColors[id],\n              size: 4,\n              lat: drop_lat,\n              lng: drop_lng,\n              type: MarkerType.PERSON_DROP,\n            },\n          ]\n        )\n        .flat()\n        .filter((value) => value !== null)\n\n      setMarkerPositions([...vMarkers, ...tMarkers])\n      setVehiclesState((prev: Map<string, VehicleState>) => {\n        const newState = new Map(prev)\n        for (const vehicle of Array.from(vehicles || [])) {\n          const { name } = vehicle as VehicleState\n          newState.set(name, vehicle as VehicleState)\n        }\n        return newState\n      })\n    },\n    [logs, allColors]\n  )\n\n  useEffect(() => {\n    if (!logs) return\n    setVehiclesState((prev: Map<string, VehicleState>) => {\n      const nameCollected: string[] = Array.from(\n        new Set<string>(\n          logs\n            .map(({ vehicles }: any) =>\n              vehicles.map((v: any): string => v.name || \"\")\n            )\n            .reduce((prev, curr) => [...prev, ...curr], [])\n        )\n      )\n\n      const newMap = new Map(prev)\n      for (const name of nameCollected) {\n        // add empty values having name only\n        newMap.set(name, {\n          name,\n          lat: -1,\n          lng: -1,\n          allocated_id: null,\n        } as VehicleState)\n      }\n      return newMap\n    })\n  }, [logs])\n\n  useEffect(() => {\n    displayTimeAt(progressCurrent)\n  }, [progressCurrent])\n\n  useEffect(() => {\n    if (!running) return\n\n    // 1 frame contains 60 secs\n    const DEFAULT_TIMESTEP = 60 * 1000\n    // 1 frame / 1000 ms\n    const interval = DEFAULT_TIMESTEP / 60 / (speed || 1.0)\n    console.log(\"info\", interval, running, speed)\n\n    const timer = setTimeout(() => {\n      setProgressCurrent((prev) => prev + 1)\n    }, interval)\n\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [running, speed, progressCurrent])\n\n  const fitMapBound = useCallback(\n    (nodes: Array<{ lat: number; lng: number }>) => {\n      if (nodes.length < 1) return\n      const bounds = new kakao.maps.LatLngBounds()\n      nodes.forEach(({ lat, lng }) => {\n        bounds.extend(new kakao.maps.LatLng(lat, lng))\n      })\n      map.setBounds(bounds)\n    },\n    [map]\n  )\n\n  useEffect(() => {\n    if (!logs || logs.length < 1) return\n\n    const positions = logs\n      .map(({ vehicles, tasks }: any) =>\n        vehicles\n          .map(({ lat, lng }: any) => ({ lat, lng }))\n          .concat(\n            ...tasks.map(\n              ({ pick_lat, pick_lng, drop_lat, drop_lng }: TaskType) => [\n                {\n                  lat: pick_lat,\n                  lng: pick_lng,\n                },\n                {\n                  lat: drop_lat,\n                  lng: drop_lng,\n                },\n              ]\n            )\n          )\n      )\n      .flat()\n\n    setProgressMax(logs.length - 1)\n    fitMapBound(positions)\n    displayTimeAt(0)\n  }, [logs, fitMapBound, displayTimeAt])\n\n  useEffect(() => {\n    if (!logs || logs.length < 1) return\n\n    // collect and create pairs of name and color\n    const nameKeyValueMap: ColorName = [\n      ...Array.from(\n        new Set<string>(\n          logs\n            .map(({ vehicles, tasks }: any) =>\n              vehicles\n                .map(({ name }: any) => `${name}`)\n                .concat(tasks.map(({ id }: any) => `${id}`))\n            )\n            .flat()\n        )\n      ),\n    ]\n      .map((name: string) => ({\n        [name]: randomDarkColor(),\n      }))\n      .reduce(\n        (\n          previousValue: { [x: string]: string },\n          currentValue: { [x: string]: string }\n        ) => ({\n          ...previousValue,\n          ...currentValue,\n        }),\n        {}\n      )\n\n    setColors(nameKeyValueMap)\n  }, [logs])\n\n  const loadLogFromFile = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const files = evt.target.files\n    if (!files || files.length < 1) {\n      return\n    }\n    const file = files[0]\n    const reader: FileReader = new FileReader()\n    reader.addEventListener(\"load\", (event: any) => {\n      const result = event.target.result\n      try {\n        const { logs } = JSON.parse(result)\n        setStatus((prev) => ({ ...prev, logs }))\n        displayTimeAt(0)\n      } catch {\n        window.alert(\"Wrong JSON file format\")\n      }\n    })\n    reader.readAsText(file)\n  }\n\n  const focusTo = useCallback(\n    ({ lat, lng }: any) => {\n      map.panTo(new kakao.maps.LatLng(lat, lng))\n    },\n    [map]\n  )\n\n  type LogItemProps = {\n    vehicle: VehicleState\n    tasks: TaskType[]\n    colors: ColorName\n  }\n\n  const LogItemVehicleWithTask = ({ vehicle, tasks, colors }: LogItemProps) => {\n    const { name: vehicle_id, lat, lng, allocated_id } = vehicle\n\n    const vehicleTooltip = (\n      <VehicleIconTooltipStyled color={colors[vehicle_id]}>\n        {vehicle_id}\n      </VehicleIconTooltipStyled>\n    )\n\n    if (tasks.length < 1) {\n      const IconEmptyStyle = {\n        backgroundColor: \"transparent\",\n        borderWidth: \"1px\",\n        borderColor: \"gray\",\n        borderStyle: \"dashed\",\n      }\n      return (\n        <>\n          <LogInfoStyled className=\"pairs\" key={`log-info-${vehicle_id}`}>\n            <LogIcon\n              color={\"transparent\"}\n              style={{\n                justifySelf: \"flex-start\",\n                ...IconEmptyStyle,\n              }}\n            />\n            <VehicleLogInfoStyled>\n              <RoadLineStyled\n                style={{\n                  borderTop: `dashed 2px ${colors[vehicle_id]}`,\n                  height: \"auto\",\n                  background: \"transparent\",\n                  borderRadius: 0,\n                }}\n              />\n              <div\n                style={{\n                  position: \"absolute\",\n                  width: \"calc(100% - 32px)\",\n                  top: 0,\n                }}\n              >\n                <LogIcon\n                  key={`logicon-${vehicle_id}`}\n                  color={colors[vehicle_id]}\n                  style={{\n                    position: \"absolute\",\n                    left: \"50%\",\n                    transition: \"all 300ms ease\",\n                    zIndex: 1,\n                    backgroundColor: \"white\",\n                    borderWidth: \"1px\",\n                    borderColor: colors[vehicle_id],\n                    borderStyle: \"dashed\",\n                  }}\n                  tooltip={vehicleTooltip}\n                >\n                  <Icon\n                    type={MarkerType.VEHICLE}\n                    style={{\n                      margin: \"0 auto\",\n                      fill: colors[vehicle_id],\n                    }}\n                  />\n                </LogIcon>\n              </div>\n            </VehicleLogInfoStyled>\n            <LogIcon\n              color={\"transparent\"}\n              style={{\n                justifySelf: \"flex-end\",\n                ...IconEmptyStyle,\n              }}\n            />\n          </LogInfoStyled>\n        </>\n      )\n    }\n\n    const task = tasks[0]\n    const {\n      id: task_id,\n      status,\n      pick_lat,\n      pick_lng,\n      drop_lat,\n      drop_lng,\n    }: TaskType = task as TaskType\n\n    const isPicked = status > 5\n    const isDroped = status > 6\n\n    const IconReadyStyle = {\n      backgroundColor: \"transparent\",\n      borderWidth: \"1px\",\n      borderColor: colors[vehicle_id],\n      borderStyle: \"dashed\",\n    }\n\n    const IconNotReadyStyle = {\n      borderWidth: \"1px\",\n      borderColor: \"transparent\",\n      borderStyle: \"solid\",\n    }\n\n    const IconReadyInnerStyle = {\n      fill: colors[vehicle_id],\n    }\n\n    return (\n      <LogInfoStyled className=\"pairs\" key={`log-info-${vehicle_id}`}>\n        <LogIcon\n          color={status <= 5 ? \"transparent\" : colors[vehicle_id]}\n          style={{\n            justifySelf: \"flex-start\",\n            cursor: \"pointer\",\n            ...(isPicked ? IconNotReadyStyle : IconReadyStyle),\n          }}\n          onClick={() => {\n            focusTo({\n              lat: pick_lat,\n              lng: pick_lng,\n            })\n          }}\n        >\n          <Icon\n            type={MarkerType.PERSON_PICK}\n            style={{\n              margin: \"0 auto\",\n              ...(isPicked ? {} : IconReadyInnerStyle),\n            }}\n          />\n        </LogIcon>\n        <VehicleLogInfoStyled>\n          <RoadLineStyled\n            style={isPicked ? { backgroundColor: colors[vehicle_id] } : {}}\n          />\n          <div\n            style={{\n              position: \"absolute\",\n              width: \"calc(100% - 32px)\",\n              top: 0,\n            }}\n          >\n            <LogIcon\n              key={`logicon-${vehicle_id}`}\n              color={colors[vehicle_id]}\n              style={{\n                position: \"absolute\",\n                left: `${get_slope_weight(\n                  pick_lat,\n                  pick_lng,\n                  drop_lat,\n                  drop_lng,\n                  lat,\n                  lng\n                )}%`,\n                transition: \"all 300ms ease\",\n                cursor: \"pointer\",\n                zIndex: 1,\n              }}\n              tooltip={vehicleTooltip}\n              onClick={() => {\n                focusTo({\n                  lat,\n                  lng,\n                })\n              }}\n            >\n              <Icon\n                type={MarkerType.VEHICLE}\n                style={{\n                  margin: \"0 auto\",\n                }}\n              />\n            </LogIcon>\n          </div>\n        </VehicleLogInfoStyled>\n        <LogIcon\n          color={colors[vehicle_id]}\n          style={{\n            justifySelf: \"flex-end\",\n            cursor: \"pointer\",\n            ...(isDroped ? IconNotReadyStyle : IconReadyStyle),\n          }}\n          onClick={() => {\n            focusTo({\n              lat: drop_lat,\n              lng: drop_lng,\n            })\n          }}\n        >\n          <Icon\n            type={MarkerType.PERSON_DROP}\n            style={{\n              margin: \"0 auto\",\n              ...(isDroped ? {} : IconReadyInnerStyle),\n            }}\n          />\n        </LogIcon>\n      </LogInfoStyled>\n    )\n  }\n\n  const LogInfo = useCallback(\n    ({ time, vehicles, tasks, colors }: any) => {\n      return (\n        <>\n          {Array.from(vehicles.values())\n            .map((value) => value as VehicleState)\n            .map((thisVehicle: VehicleState) => {\n              const { name, lat, lng, allocated_id } = thisVehicle\n              const thisTasks = Array.from(tasks || []).filter(\n                ({ id }: any) => id === allocated_id\n              )\n              return (\n                <LogItemVehicleWithTask\n                  vehicle={thisVehicle}\n                  tasks={thisTasks as TaskType[]}\n                  colors={colors}\n                />\n              )\n            })}\n        </>\n      )\n    },\n    [focusTo, vehiclesState]\n  )\n\n  const [subLogs, setSubLogs] = useState<Array<any>>([])\n\n  useEffect(() => {\n    if (!logs || logs.length < 1) return\n    const sliced: Array<{\n      time: number\n      vehicles: Array<any>\n      tasks: Array<any>\n    }> = logs.slice(0, progressCurrent + 1)\n    setSubLogs(sliced)\n  }, [logs, progressCurrent])\n\n  const StateViewer = useCallback((): React.ReactElement => {\n    if (!subLogs || subLogs.length < 1) {\n      return (\n        <center\n          style={{\n            position: \"absolute\",\n            top: \"50%\",\n            left: 0,\n            width: \"100%\",\n          }}\n        >\n          <Typography\n            color=\"neutral\"\n            fontSize={2}\n            sx={{\n              translate: \"0% -50%\",\n              textAlign: \"center\",\n            }}\n          >\n              .\n          </Typography>\n        </center>\n      )\n    }\n    const latestLog = subLogs[subLogs.length - 1]\n    const { time, tasks } = latestLog\n    return (\n      <Stack spacing={1}>\n        <div key={`log-${time}`}>\n          <Divider\n            sx={{\n              marginTop: \"0.5rem\",\n              marginBottom: \"0.25rem\",\n            }}\n          >\n            <Typography color=\"neutral\" fontSize={2}>\n              {humanizeDate(new Date(time))}\n            </Typography>\n          </Divider>\n          <LogInfo\n            time={time}\n            vehicles={vehiclesState}\n            tasks={tasks}\n            colors={allColors}\n          />\n        </div>\n      </Stack>\n    )\n  }, [subLogs, allColors, vehiclesState])\n\n  return (\n    <>\n      {markerPositions.map(\n        ({ key, color, size, lat, lng, type }: MarkerPosition) => (\n          <CustomOverlayMap\n            key={`marker-${key}`}\n            position={{\n              lat,\n              lng,\n            }}\n            ref={(ref: any) => {\n              if (ref == null) return\n              const parentNode = ref.cc.parentElement\n              parentNode.className = \"vehicle-marker\"\n            }}\n          >\n            <Dot color={color || \"dodgerblue\"} size={size / level}>\n              <Icon type={type as number} />\n            </Dot>\n          </CustomOverlayMap>\n        )\n      )}\n      <ViewerButtons\n        running={running}\n        runable={runable}\n        progressMax={progressMax}\n        progressCurrent={progressCurrent}\n        speed={speed}\n        onSelectSpeed={setSpeed}\n        onProgressUpdated={setProgressCurrent}\n        onClickPlay={() => setRunning(!running)}\n        onClickUpload={loadLogFromFile}\n      />\n\n      <Aside>\n        <StateViewer />\n      </Aside>\n    </>\n  )\n}\n\nexport default Viewer\n","export const humanizeDate = (date: Date): string => {\n  const options = {\n    timeZone: \"Asia/Seoul\",\n  }\n  const dateString: string = new Intl.DateTimeFormat(\"ko-kr\", {\n    dateStyle: \"full\",\n    ...options,\n  }).format(date)\n  const dayPeriod: string = new Intl.DateTimeFormat(\"ko-kr\", {\n    dayPeriod: \"long\",\n    ...options,\n  }).format(date)\n  const timeFormat = new Intl.DateTimeFormat(\"ko-kr\", {\n    hour: \"numeric\",\n    minute: \"numeric\",\n    second: \"numeric\",\n    hour12: true,\n    ...options,\n  }).format(date)\n  const [hour, minute, sec] = timeFormat.split(\" \")[1].split(\":\")\n  const timeString: string = `${hour} ${minute}`\n  return [dateString, dayPeriod, timeString].join(\"\\n\")\n}\n","import React from \"react\"\nimport styled from \"styled-components\"\n\ntype CircleStyleProps = {\n  size: number\n  color?: string\n  selected: boolean\n  children?: React.ReactNode | React.ReactNode[]\n}\n\nconst Circle = styled.div`\n  position: absolute;\n  display: flex;\n  width: 0.75em;\n  height: 0.75em;\n  background: white;\n  border-width: 0.15rem;\n  border-style: solid;\n  border-color: ${({ selected, color = \"#d3232f\" }: CircleStyleProps) =>\n    selected ? \"black\" : color};\n  border-radius: 8rem;\n  align-items: center;\n  justify-content: center;\n  scale: ${({ size }: CircleStyleProps) => size};\n  box-sizing: border-box;\n  cursor: pointer;\n\n  &:hover {\n    border-color: ${({ selected, color = \"#a10e25\" }: CircleStyleProps) =>\n      selected ? \"black\" : color};\n  }\n`\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n`\n\ntype PointProps = {\n  id: string\n  size?: number\n  color?: string\n  selected?: boolean\n  children?: React.ReactNode | React.ReactNode[]\n  onMouseEnter?: React.MouseEventHandler<any>\n  onMouseLeave?: React.MouseEventHandler<any>\n  onMouseDown?: React.MouseEventHandler<any>\n  onMouseUp?: React.MouseEventHandler<any>\n  onClick?: React.MouseEventHandler<any>\n}\n\nconst Point = ({\n  id,\n  size = 2,\n  selected = false,\n  color,\n  children,\n  onMouseEnter,\n  onMouseDown,\n  onMouseLeave,\n  onMouseUp,\n  onClick,\n}: PointProps) => {\n  return (\n    <Container data-id={id}>\n      <Circle\n        size={size}\n        color={color}\n        selected={selected}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        onMouseDown={onMouseDown}\n        onMouseUp={onMouseUp}\n        onClick={onClick}\n      >\n        <div className=\"icon\">{children}</div>\n      </Circle>\n    </Container>\n  )\n}\n\nexport default Point\n","import React, { useCallback, useRef } from \"react\"\n\nimport GrainIcon from \"@mui/icons-material/Grain\"\nimport PolylineIcon from \"@mui/icons-material/Polyline\"\nimport OpenWithIcon from \"@mui/icons-material/OpenWith\"\nimport UploadIcon from \"@mui/icons-material/Upload\"\nimport DownloadIcon from \"@mui/icons-material/Download\"\n\nimport IconButton from \"../../../components/IconButton\"\nimport HorizontalContainer, {\n  Divider,\n} from \"../../../components/HorizontalContainer\"\n\ntype MenuButtonProps = {\n  title: string\n  active?: boolean\n  icon: React.ReactElement\n  onClick: () => void\n}\n\nconst MenuButton = ({\n  title,\n  active = false,\n  icon,\n  onClick,\n}: MenuButtonProps) => {\n  return (\n    <IconButton\n      tooltip={title}\n      tooltipColor=\"primary\"\n      tooltipPlacement=\"top\"\n      active={active}\n      variant=\"outlined\"\n      size={\"32px\"}\n      onClick={onClick}\n    >\n      {icon}\n    </IconButton>\n  )\n}\n\ntype EditorButtonsProps = {\n  editMode: string\n  onModeChanged: (mode: string) => void\n  onClickUpload: (event: React.ChangeEvent<HTMLInputElement>) => void\n  onClickDownload: () => void\n}\n\nconst EditorButtons = ({\n  editMode,\n  onModeChanged,\n  onClickUpload,\n  onClickDownload,\n}: EditorButtonsProps): React.ReactElement => {\n  const onSelectMode = (mode: string) => {\n    onModeChanged(mode)\n  }\n\n  const ModeButtons = useCallback((): React.ReactElement => {\n    return (\n      <>\n        <MenuButton\n          title=\" /\"\n          active={editMode === \"add\"}\n          icon={<GrainIcon />}\n          onClick={() => onSelectMode(\"add\")}\n        />\n        <MenuButton\n          title=\" \"\n          active={editMode === \"link\"}\n          icon={<PolylineIcon />}\n          onClick={() => onSelectMode(\"link\")}\n        />\n        <MenuButton\n          title=\" \"\n          active={editMode === \"move\"}\n          icon={<OpenWithIcon />}\n          onClick={() => onSelectMode(\"move\")}\n        />\n      </>\n    )\n  }, [editMode])\n\n  const UploadButton = useCallback((): React.ReactElement => {\n    const ref = useRef<HTMLInputElement>(null)\n    return (\n      <>\n        <label\n          htmlFor=\"upload-log\"\n          style={{\n            width: \"100%\",\n          }}\n        >\n          <input\n            ref={ref}\n            style={{ display: \"none\" }}\n            id=\"upload-log\"\n            name=\"upload-log\"\n            type=\"file\"\n            accept=\".json,application/json\"\n            onChange={onClickUpload}\n          />\n          <MenuButton\n            title=\"\"\n            icon={<UploadIcon />}\n            onClick={() => {\n              if (ref.current) {\n                ref.current.click()\n              }\n            }}\n          />\n        </label>\n      </>\n    )\n  }, [onClickUpload])\n\n  const DownloadButton = useCallback(\n    (): React.ReactElement => (\n      <MenuButton\n        title=\"\"\n        icon={<DownloadIcon />}\n        onClick={onClickDownload}\n      />\n    ),\n    [onClickDownload]\n  )\n\n  return (\n    <>\n      <HorizontalContainer position=\"bottom\">\n        <ModeButtons />\n        <Divider />\n        <UploadButton />\n        <DownloadButton />\n      </HorizontalContainer>\n    </>\n  )\n}\n\nexport default EditorButtons\n","export interface Node {\n  lat: number\n  lng: number\n}\n\nexport interface Edge {\n  from: number\n  to: number\n}\n\nclass UnionSet {\n  nodes: Node[]\n  parentIdx: Map<string | number, string | number>\n\n  constructor(nodes: Node[]) {\n    this.nodes = nodes\n\n    this.parentIdx = new Map()\n  }\n\n  hasKey(id: string | number): boolean {\n    return id in this.parentIdx\n  }\n\n  find(id: string | number): string | number {\n    const parent = this.parentIdx.get(id)\n    if (!parent || id === parent) {\n      this.parentIdx.set(id, id)\n      return id\n    } else {\n      const president = this.find(parent)\n      this.parentIdx.set(id, president)\n      return president\n    }\n  }\n\n  merge(a: string | number, b: string | number): void {\n    const ga = this.find(a)\n    const gb = this.find(b)\n    this.parentIdx.set(ga, gb)\n  }\n\n  keys(): Array<string | number> {\n    return Array.from(this.parentIdx.keys())\n  }\n}\n\nexport default UnionSet\n","/* global kakao */\n\nimport React, { useEffect, useState, useCallback, useMemo } from \"react\"\n\nimport Point from \"../../components/Point\"\nimport EditorButtons from \"./Controls/EditorButtons\"\nimport { jsonToBlob, saveFile } from \"../../helpers/fileInteracts\"\nimport { randomDarkColor } from \"../../helpers/colors\"\nimport UnionSet from \"../../helpers/unionSet\"\n\nimport { CustomOverlayMap, useMap, Polyline } from \"react-kakao-maps-sdk\"\n\ntype NodeType = {\n  key: string\n  lat: number\n  lng: number\n}\n\ntype EdgeType = {\n  from: string\n  to: string\n}\n\nconst saveGraphFile = (\n  nodes: Array<NodeType>,\n  edges: Array<EdgeType>\n): void => {\n  const keys: Array<string> = nodes.map(({ key }) => key)\n  const keyToIndex = (key: string): number => keys.indexOf(key)\n  const transformed = {\n    nodes: nodes.map(({ key, lat, lng }: NodeType) => ({\n      id: keyToIndex(key),\n      lat,\n      lng,\n      info: {},\n    })),\n    edges: edges.map(({ from, to }: EdgeType) => ({\n      from: keyToIndex(from),\n      to: keyToIndex(to),\n    })),\n  }\n  const filename = \"graph-\" + new Date().toISOString() + \".json\"\n  saveFile(filename, jsonToBlob(transformed))\n}\n\nconst Editor = (): React.ReactElement => {\n  const map: kakao.maps.Map = useMap()\n  const [nodes, setNodes] = useState<Array<NodeType>>([])\n  const [bufNodes, _setBufNodes] = useState<Array<NodeType>>([])\n  const [edges, setEdges] = useState<Array<EdgeType>>([])\n  const [level, setLevel] = useState<number>(1)\n  const [editMode, setEditMode] = useState<string>(\"add\")\n  const [selected, setSelected] = useState<Array<string>>([])\n  const [cursorPos, setCursorPos] = useState<NodeType>()\n\n  const [_visibleEdges, _setVisibleEdges] = useState<EdgeType[]>([])\n  const [graphColors, setGraphColors] = useState<Map<string, string>>(new Map())\n\n  const visibleEdges = useMemo((): Array<EdgeType> => {\n    console.log(\"_visibleEdges\", _visibleEdges)\n    return _visibleEdges.map((edge: EdgeType) => {\n      const { from, to } = edge\n      return edge\n    })\n  }, [_visibleEdges])\n\n  useEffect(() => {\n    const _edges = edges.filter(({ from, to }: EdgeType) => {\n      for (const { key } of bufNodes) {\n        if (from === key || to === key) return true\n      }\n      return false\n    })\n    _setVisibleEdges(_edges)\n  }, [bufNodes, edges])\n\n  useEffect(() => {\n    const union = new UnionSet(nodes)\n    for (const e of edges) {\n      union.merge(e.from, e.to)\n    }\n    const colorMap = new Map<string, string>()\n    const groupColors = new Map<string, string>()\n    for (const key of union.keys()) {\n      groupColors.set(key as string, randomDarkColor())\n    }\n    for (const { from, to } of edges) {\n      const a = union.find(from) as string\n      const b = union.find(to) as string\n      colorMap.set(from, groupColors.get(a) as string)\n      colorMap.set(to, groupColors.get(b) as string)\n    }\n    console.log(\"set graph colors\", colorMap)\n    setGraphColors(colorMap)\n  }, [nodes, edges])\n\n  const getMapBounds = useCallback(() => {\n    const bounds = map.getBounds()\n    const level = map.getLevel()\n    const [ne, sw] = [bounds.getNorthEast(), bounds.getSouthWest()]\n    const top = sw.getLat()\n    const left = sw.getLng()\n    const bottom = ne.getLat()\n    const right = ne.getLng()\n    const width: number = right - left\n    const height: number = bottom - top\n    return {\n      level,\n      top,\n      left,\n      bottom,\n      right,\n      width,\n      height,\n    }\n  }, [map])\n\n  const setTmpNodes = useCallback(\n    (newNodes: Array<NodeType>) => {\n      const { top, left, bottom, right, width, height, level } = getMapBounds()\n      const nodesInBounds = newNodes.filter(\n        ({ lat, lng }: NodeType): boolean =>\n          top <= lat && lat <= bottom && left <= lng && lng <= right\n      )\n      type nodeInGrid = { lat: number; lng: number; grid: string }\n      const nodesInGrid: Array<nodeInGrid> = nodesInBounds.map(\n        ({ key, lat, lng }) => ({\n          id: key,\n          key,\n          lat,\n          lng,\n          grid: `${Math.round(lat / (width / 100))},${Math.round(\n            lng / (height / 100)\n          )}`,\n        })\n      )\n      const compressNodesInGrid: Array<NodeType> = [\n        ...Array.from(\n          new Map(\n            nodesInGrid.map(({ key, grid, lat, lng }: any) => [\n              grid,\n              {\n                id: key,\n                key,\n                lat,\n                lng,\n              } as NodeType,\n            ])\n          ).values()\n        ),\n      ]\n      console.log(\"Bounds:\", top, left, bottom, right)\n      console.log(\"Nodes(Grid)\", nodesInGrid, compressNodesInGrid)\n      console.log(\"Bounds (width, height)\", bottom - top, right - left, level)\n      console.log(\"Set New Temporal Nodes\", compressNodesInGrid)\n      _setBufNodes(compressNodesInGrid)\n    },\n    [getMapBounds]\n  )\n\n  const isSelected = useCallback(\n    (id: string) => selected.indexOf(id) !== -1,\n    [selected]\n  )\n\n  const selectedNode = useMemo((): NodeType | null => {\n    const node = nodes.filter(({ key }) => isSelected(key))\n    return node.length > 0 ? node[0] : null\n  }, [nodes, isSelected])\n\n  const createEdge = (from: NodeType, to: NodeType) => {\n    setEdges((prev) =>\n      prev\n        .filter((edge) => !(edge.from == from.key && edge.to == to.key))\n        .concat({\n          from: from.key,\n          to: to.key,\n        } as EdgeType)\n    )\n  }\n\n  const findNode = (id: string, array: Array<NodeType>): NodeType | null => {\n    for (const node of array) {\n      const { key } = node\n      if (key === id) return node\n    }\n    return null\n  }\n\n  const getNode = useCallback(\n    (id: string): NodeType | null => {\n      return findNode(id, nodes)\n    },\n    [nodes]\n  )\n\n  const isNodeVisible = useCallback(\n    (id: string): boolean => {\n      const result = findNode(id, bufNodes) !== null\n      console.log(\"isNodeVisible\", id, result)\n      return result\n    },\n    [bufNodes]\n  )\n\n  useEffect(() => {\n    setLevel(map.getLevel())\n    setTimeout(() => {\n      map.relayout()\n    }, 0)\n  }, [map])\n\n  useEffect(() => {\n    // update edge to sync up\n    const hasNode = (id: string): boolean => getNode(id) !== null\n    setEdges((prev) =>\n      prev.filter(({ from, to }: EdgeType) => hasNode(from) && hasNode(to))\n    )\n  }, [getNode, setEdges])\n\n  useEffect(() => {\n    console.log(\"selected\", selected)\n    if (selected.length >= 2) {\n      const [fromID, toID] = selected\n      const [from, to] = [getNode(fromID), getNode(toID)]\n      if (from !== null && to !== null) {\n        createEdge(from, to)\n        setCursorPos(undefined)\n        setSelected([])\n      }\n      return\n    }\n  }, [selected, getNode, setCursorPos])\n\n  const onMapClick = useCallback(\n    (evt: any) => {\n      const { latLng: loc } = evt\n      if (editMode !== \"add\") {\n        return\n      }\n      const lat = loc.getLat()\n      const lng = loc.getLng()\n      console.log(\"Map Clicked\", lat, lng)\n      setNodes((prev) => {\n        const nodeId = Math.random().toString(16).slice(2) as string\n        const node = { key: `node-${nodeId}`, lat, lng } as NodeType\n        console.log(\"add node\", node)\n        return [...prev, node]\n      })\n    },\n    [editMode]\n  )\n\n  const onMapMouseUp = useCallback((evt: any) => {}, [])\n\n  const onMapMouseMove = useCallback(\n    (evt: any) => {\n      const { latLng: loc } = evt\n      const lat = loc.getLat()\n      const lng = loc.getLng()\n      if (editMode === \"link\") {\n        setCursorPos({ key: \"cursor\", lat, lng } as NodeType)\n      } else if (editMode === \"move\") {\n        if (selected.length != 1) {\n          return\n        }\n        setNodes((prev) =>\n          prev.map((node: NodeType): NodeType => {\n            if (selected[0] !== node.key) {\n              return node\n            } else {\n              return { ...node, lat, lng }\n            }\n          })\n        )\n      }\n    },\n    [editMode, setNodes, selected, setCursorPos]\n  )\n\n  useEffect(() => {\n    const updateNodes = () => setTmpNodes(nodes)\n    kakao.maps.event.addListener(map, \"idle\", updateNodes)\n    return () => {\n      kakao.maps.event.addListener(map, \"idle\", updateNodes)\n    }\n  }, [map, nodes])\n\n  useEffect(() => {\n    setTmpNodes(nodes)\n  }, [nodes])\n\n  useEffect(() => {\n    map.setCursor(\"default\")\n    kakao.maps.event.addListener(map, \"click\", onMapClick)\n    kakao.maps.event.addListener(map, \"mouseup\", onMapMouseUp)\n    kakao.maps.event.addListener(map, \"mousemove\", onMapMouseMove)\n    return () => {\n      map.setCursor(\"\")\n      kakao.maps.event.removeListener(map, \"click\", onMapClick)\n      kakao.maps.event.removeListener(map, \"mouseup\", onMapMouseUp)\n      kakao.maps.event.removeListener(map, \"mousemove\", onMapMouseMove)\n    }\n  }, [map, onMapClick, onMapMouseUp, onMapMouseMove])\n\n  const onMouseDownPoint = useCallback(\n    (evt: any) => {\n      const container = evt.target.closest(\"[data-id]\") as HTMLElement\n      if (!container) return\n      const id = container.getAttribute(\"data-id\") || \"\"\n      const mouseType = evt.button as number\n      if (editMode === \"add\") {\n        if (mouseType === 2) {\n          // right button\n          setNodes((prev) => [...prev].filter(({ key }) => key !== id))\n        }\n      } else if (editMode === \"link\") {\n        if (mouseType === 0) {\n          // left button to select\n          setSelected((prev) => prev.filter((i) => i != id).concat(id))\n        } else if (mouseType === 2) {\n          // right button to unselect\n          setSelected((prev) => prev.filter((i) => i != id))\n        }\n      } else if (editMode === \"move\") {\n        if (mouseType === 0) {\n          // left button to move\n          setSelected((prev) => (prev.length > 0 ? [] : [id]))\n        }\n      }\n    },\n    [editMode, setNodes, setSelected]\n  )\n\n  const onMouseUpPoint = useCallback((evt: any) => {}, [])\n\n  const guideLine = useMemo(\n    (): React.ReactElement => (\n      <>\n        {editMode === \"link\" && selectedNode && cursorPos && (\n          <Polyline\n            key={`edge-guide`}\n            path={[selectedNode, cursorPos].map(({ lat, lng }: NodeType) => ({\n              lat,\n              lng,\n            }))}\n            strokeWeight={3}\n            strokeColor=\"#db4040\"\n            strokeOpacity={1}\n            strokeStyle=\"dashed\"\n          />\n        )}\n      </>\n    ),\n    [editMode, selectedNode, cursorPos]\n  )\n\n  const NodePoints = useCallback((): React.ReactElement => {\n    const { level } = getMapBounds()\n    return (\n      <>\n        {bufNodes.map(\n          ({ key, lat, lng }: NodeType): React.ReactElement => (\n            <CustomOverlayMap\n              position={{\n                lat,\n                lng,\n              }}\n              key={key}\n            >\n              <Point\n                id={key}\n                color={graphColors.get(key)}\n                size={6 / level}\n                selected={isSelected(key)}\n                onMouseDown={onMouseDownPoint}\n                onMouseUp={onMouseUpPoint}\n              />\n            </CustomOverlayMap>\n          )\n        )}\n      </>\n    )\n  }, [\n    bufNodes,\n    graphColors,\n    getMapBounds,\n    isSelected,\n    onMouseDownPoint,\n    onMouseUpPoint,\n  ])\n\n  const EdgeLines = useCallback((): React.ReactElement => {\n    console.log(\"graph colors\", graphColors)\n    return (\n      <>\n        {visibleEdges.map(({ from, to }: EdgeType): React.ReactElement => {\n          const path: Array<any> = [from, to]\n            .map(getNode)\n            .filter((n) => n !== null)\n          if (path.length != 2) {\n            return <></>\n          }\n          return (\n            <Polyline\n              key={`edge-${from}-${to}`}\n              path={path.map(({ lat, lng }: NodeType) => ({\n                lat,\n                lng,\n              }))}\n              strokeWeight={3}\n              strokeColor={graphColors.get(from)}\n              strokeOpacity={1}\n              strokeStyle=\"solid\"\n            />\n          )\n        })}\n      </>\n    )\n  }, [visibleEdges, graphColors, getNode, isNodeVisible])\n\n  const fitMapBound = useCallback(\n    (nodes: NodeType[]) => {\n      if (nodes.length < 1) return\n      const bounds = new kakao.maps.LatLngBounds()\n      nodes.forEach(({ lat, lng }) => {\n        bounds.extend(new kakao.maps.LatLng(lat, lng))\n      })\n      map.setBounds(bounds)\n      setTimeout(() => {\n        map.relayout()\n      }, 0)\n    },\n    [map]\n  )\n\n  const loadGraphFromFile = useCallback(\n    (evt: React.ChangeEvent<HTMLInputElement>) => {\n      const files = evt.target.files\n      if (!files || files.length < 1) {\n        return\n      }\n      const file = files[0]\n      const reader: FileReader = new FileReader()\n      reader.addEventListener(\"load\", (event: any) => {\n        const result = event.target.result\n        try {\n          const { nodes, edges } = JSON.parse(result)\n          const newNodes: Array<NodeType> = nodes.map(\n            ({ id, lat, lng }: any) =>\n              ({\n                key: `node-${id}`,\n                lat,\n                lng,\n              } as NodeType)\n          )\n          setNodes(newNodes)\n          setEdges(\n            edges.map(\n              ({ from, to }: any) =>\n                ({\n                  from: (newNodes[from] as NodeType).key,\n                  to: (newNodes[to] as NodeType).key,\n                } as EdgeType)\n            )\n          )\n          fitMapBound(nodes)\n          // console.log(nodes, edges)\n        } catch {\n          window.alert(\"Failed to parse JSON\")\n        }\n      })\n      reader.readAsText(file)\n    },\n    [setNodes, setEdges]\n  )\n\n  const downloadGraphToFile = useCallback(\n    () => saveGraphFile(nodes, edges),\n    [nodes, edges]\n  )\n\n  return (\n    <>\n      <EdgeLines />\n      {guideLine}\n      <NodePoints />\n      <EditorButtons\n        editMode={editMode || \"add\"}\n        onClickDownload={downloadGraphToFile}\n        onClickUpload={loadGraphFromFile}\n        onModeChanged={setEditMode}\n      />\n    </>\n  )\n}\n\nexport default Editor\n","export const saveFile = (filename: string, blob: Blob) => {\n  const a = document.createElement(\"a\")\n  a.download = filename\n  a.href = URL.createObjectURL(blob)\n  a.dataset.downloadurl = [\"text/json\", a.download, a.href].join(\":\")\n  a.addEventListener(\"click\", (e) => {\n    setTimeout(() => URL.revokeObjectURL(a.href), 30 * 1000)\n  })\n  a.click()\n}\n\nexport const jsonToBlob = (json: object): Blob =>\n  new Blob([JSON.stringify(json, null, 2)], {\n    type: \"application/json\",\n  })\n","import React, { createContext, useState, useContext } from \"react\"\n\nexport interface ContextState<T> {\n  state: T\n  setState: React.Dispatch<React.SetStateAction<ControlState>>\n}\n\nexport interface ControlState {\n  mode: \"view\" | \"edit\"\n  viewSpeed?: number\n  viewRunning?: boolean\n}\n\nconst initialState: ControlState = {\n  mode: \"view\",\n  viewSpeed: 1.0,\n  viewRunning: false,\n}\n\nconst Context: any = createContext<ContextState<ControlState> | undefined>(\n  undefined\n)\n\nexport const ControlProvider = (props: any) => {\n  const [state, setState] = useState<ControlState>(initialState)\n\n  // const setContext = (state: ControlState) => {\n  //   setState((prevState: ControlState) => ({ ...prevState, ...state }))\n  // }\n\n  return (\n    <Context.Provider value={{ state: { ...state }, setState }}>\n      <>{props.children}</>\n    </Context.Provider>\n  )\n}\n\nexport const useControlState = (): [\n  ControlState,\n  React.Dispatch<React.SetStateAction<ControlState>>\n] => {\n  const ctx: ContextState<ControlState> | undefined = useContext(Context)\n  if (ctx === undefined) {\n    throw new Error(\"useControlState should be used within ControlProvider\")\n  }\n  const { state, setState } = ctx\n  return [\n    state as ControlState,\n    setState as React.Dispatch<React.SetStateAction<ControlState>>,\n  ]\n}\n","import React, { useState, useCallback } from \"react\"\n\nimport KakaoMap from \"../../components/KakaoMap\"\nimport HorizontalContainer from \"../../components/HorizontalContainer\"\nimport { Button } from \"@mui/joy\"\nimport Viewer from \"./Viewer\"\nimport Editor from \"./Editor\"\nimport CableIcon from \"@mui/icons-material/Cable\"\nimport LocalTaxiIcon from \"@mui/icons-material/LocalTaxi\"\nimport { useControlState, ControlState } from \"../../providers/ControlProvider\"\n\nimport \"./index.css\"\n\ntype SwitchButtonProps = React.PropsWithChildren & {\n  mode: \"view\" | \"edit\"\n  onChange: (mode: string) => void\n}\n\nconst SwitchButton = ({\n  mode,\n  onChange,\n}: SwitchButtonProps): React.ReactElement => (\n  <>\n    <Button\n      size=\"sm\"\n      startDecorator={<LocalTaxiIcon />}\n      variant={mode === \"view\" ? \"solid\" : \"plain\"}\n      onClick={() => onChange(\"view\")}\n      sx={{\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n      }}\n    >\n      Viewer\n    </Button>\n    <Button\n      size=\"sm\"\n      startDecorator={<CableIcon />}\n      variant={mode === \"edit\" ? \"solid\" : \"plain\"}\n      onClick={() => onChange(\"edit\")}\n      sx={{\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n      }}\n    >\n      Editor\n    </Button>\n  </>\n)\n\nexport default function Map() {\n  const [controls, setControls] = useControlState()\n\n  const latitude = 37.52897\n  const longitude = 126.917101\n  const [level, setLevel] = useState<number>(3)\n\n  const SwitchButtonControlled = useCallback(\n    (): React.ReactElement => (\n      <HorizontalContainer\n        position=\"top\"\n        gap={0}\n        style={{\n          padding: 0,\n          height: \"auto\",\n        }}\n      >\n        <SwitchButton\n          mode={controls.mode}\n          onChange={(mode: string) => {\n            setControls((prev) => ({ ...prev, mode } as ControlState))\n          }}\n        />\n      </HorizontalContainer>\n    ),\n    [(controls as ControlState).mode, setControls]\n  )\n\n  return (\n    <>\n      <KakaoMap\n        center={{\n          lat: latitude,\n          lng: longitude,\n        }}\n        level={level}\n        onZoomChanged={(map) => setLevel(map.getLevel())}\n        style={{\n          width: \"100%\",\n          height: \"100vh\",\n          zIndex: 0,\n        }}\n      >\n        <SwitchButtonControlled />\n        {controls.mode == \"view\" ? <Viewer /> : <Editor />}\n      </KakaoMap>\n    </>\n  )\n}\n","import React from \"react\"\nimport Map from \"./Map\"\nimport { ControlProvider } from \"../providers/ControlProvider\"\nimport { StatusProvider } from \"../providers/StatusProvider\"\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <StatusProvider>\n        <ControlProvider>\n          <Map />\n        </ControlProvider>\n      </StatusProvider>\n    </div>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport ReactDOM from \"react-dom/client\"\nimport \"./index.css\"\nimport App from \"./pages/App\"\nimport reportWebVitals from \"./reportWebVitals\"\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\") as HTMLElement)\nroot.render(\n  // <React.StrictMode>\n  <App />\n  // </React.StrictMode>\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}